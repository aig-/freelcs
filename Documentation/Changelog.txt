LoudnessCorrection Version 188
-------------------------------
- Dedug mode now adds some more information about an audio file to the logfile: filename, integrated_loudness, loudness_range, highest_peak_db, channel_count, sample_rate, bit_depth, audio_duration. This info can be used for debugging

LoudnessCorrection Version 187
-------------------------------
- Bugfix: LoudnessCalculation started sometimes too early when files were still being transferred through network. This was due to the fact that in some cases the file size was immidiately reported as full when the tranfer started. This seemed to happen when the source computer was a windows computer.
- Added some more text output when debug mode is on.
- Bugfix: sox fails to report the duration of a long file correctly. This caused the output file size to be estimated incorrectly which in turn caused trying to write bigger than 4 GB files to wav format. Worked around the problem by getting file duration with mediainfo.

Documentation
--------------
- Made some more updates, documentation is now up to date :)

Documentation
--------------
- Started updating documentation to reflect the latest state of FreeLCS. Will release FreeLCS 2.0 soon :)

Installer 049
--------------
- Bugfix: Corrected a bug in libebur128 patch installer introduced in version 048 and changed the name of a variable to one that better describes what's stored in it.

LoudnessCorrection Version 185
-------------------------------
- Bugfix: error messages about nonsupported channel counts (channel counts bigger that 6) are no longer sent by email.
-Â Cosmetic change to how the machine info looks in emailed error messages.

Installer 048
--------------
- Installer now checks if libebur128 program 'loudness' has 4.0 and 5.0 channel compatibility patch applied and if not forces new installation with the patch. The patch makes libebur128 calculate correctly loudness of 4.0 (L, R, LS, RS) and 5.0 (L, R, C, LS, RS) files.
- Bugfix: Reading of configfile written in previous installation caused a crash if email recipients list was empty.
- Bugfix: Installer does not read in values from configuration written during previous installation unless previous installer version number was 39 or higher. There were some changes in stuff saved in config file in version 39.
- If debug mode is on then installer displays values read in from config file that was written during previous installation.

LoudnessCorrection Version 184
-------------------------------
- Bugfix: If there are audio streams in a file with channels count of zero (these are possible in mpegts), then create error message in result graphics file. Previously these streams were silently skipped.
- Bugfix: The changes made in 183 caused a crash if LoudnessCorrection.py was started manually. The crash was caused because a list was modified from being a simple list to being a list of lists.
- Made some cosmetic changes to error messages. There were filenames missing in some error messages sent to logfile and if the error message was printed on results graphics it sometimes included filename even though the title of result graphics always is the filename.

LoudnessCorrection Version 183
-------------------------------
- Undid changes made in version 177. If there are more than 6 channels in an audio stream or file then the stream / file will not be processed because libebur128 only supports channel counts from 1 to 6. An error message is printed on result graphics file telling the user about this. If there are streams in file with channel counts over and under 6 then only streams with channel counts of 6 and lower are processed. 
- Bugfix: When channel count is 8 FFmpeg says it is 7.1. This situation in now handled correctly.

LoudnessCorrection Version 181
-------------------------------
- Bugfix: In some rare cases FFmpeg tells channel count is 'quad' when usually in these cases it says it is '4'. The 'quad' situation is handled now correctly.

LoudnessCorrection Version 180
-------------------------------
- If user drops files that have no audio (for example text files) in the HotFolder then error message is no longer sent by email.
- Bugfix: When I made some changes to the exeception handling code early in the development, some typos were left in email sending exeception handling causing a crash.

LoudnessCorrection Version 179
-------------------------------
- Added a function 'debug_write_loudness_calculation_info_to_a_logfile' than can be used to write filenames and loudness calculation data to a text file. Saved logfiles can be compared to new ones when critical parts of LoudnessCorrection.py or for example libebur128 gets modified. In other words this debug function can be used to validate that loudness calculation gives the same results before and after a change in critical components.

LoudnessCorrection Version 178
-------------------------------
- Bugfix: If inputfile format is mpegts, then file duration is found out using 'mediainfo'. If mediainfo did not find time info, LoudnessCorrection crashed.

LoudnessCorrection Version 177
-------------------------------
- If there are more than 6 audio channels in a single stream then a warning message on the results graphics now tells the user that channels beyond 6 will be ignored.

HeartBeat_Checker version 020
-------------------------------
- Cosmetic change, removed one word ('at') from the HeartBeat_Checker startup email.

Installer 047
--------------
- When installer starts it now checks for previously saved configfile and if found reads in some values from it and uses them as defaults.

Installer 045
--------------
- Changed the text of the 'Force reinstallation' button.
- Moved the 'Reinstallation toggle' button to another part of the window.
- Bugfix: If LoudnessCorrection.py or HeartBeat_Checker.py was not in the same directory as the installer the install failed silently, now an error message is displayed.

Installer 044
--------------
- Bugfix: Installer did not check if the apt-get database was already in use by another program. This caused the installation to silently fail in these cases.

Installer 043
--------------
- Bugfix: If FreeLCS was previously installed and a new installation / update failed then LoudnessCorrection.py was deleted in some cases.
- Bugfix: Some active buttons remained active and clickable after installation had started. Buttons go to 'disabled' state now when installation starts.

Installer 042
--------------
- Changed the default email sending interval for LoudnessCorrection.py from 10 minutes to 30 minutes.
- Added a new button to force reinstallation of all programs. This is needed when libebur128 gets bugfixes and needs to be updated.
- Bugfix: errors that happened during installation were not shown on the program window.

Installer 041
--------------
- Installs now the program 'mediainfo' that is required beginning from LoudnessCorrection version 173.

LoudnessCorrection Version 175
-------------------------------
Bugfix: Compressed audio in wav - container was not handled at all, now it is uncompressed with FFmpeg and processed.
Bugfix: If there are more than 1 streams in ogg then extract streams with FFmpeg.
Bugfix: When LoudnessCorrection.py was run by starting it manually from the commandline, it crashed if given gibberish commandline arguments.

LoudnessCorrection Version 174
-------------------------------
- Made a change to how the destinations for error messages are defined (where error messages are sent (log, screen, email)). Previously there was only a global default, now destinations can be defined when calling the subroutine that prints / sends error messages.
- If file duration is less than 1 second the script no longer sends an error message by email.
- Bugfix: error message about exceeding 4 GB wav format max size was not printed in Finnish.
- Bugfix: The variable 'ffmpeg_output_format' was not transferred correctly from installer.py to LoudnessCorrection.py due to a typo in LoudnessCorrection.py

LoudnessCorrection Version 173
-------------------------------
- Changed default output format to wav in cases where audio streams need to be extracted from a file with FFmpeg and input file bit depth is 24 bits. Previous format was flac, but I learned that FFmpeg forces bit depth to 16 bits always when writing flac files.
- Bugfix: If file format is mpeg transportstream (mpegts) then FFmpeg is not always able to tell the correct file duration. In these cases read file duration with external command: mediainfo.
- New requirement: mediainfo needs to be installed.

Installer 040
--------------
- There is a variable (ffmpeg_output_format) defined in installer.py that used to tell LoudnessCorrection.py what output format to use when extracting audio streams with FFmpeg. The output format is now defined in LoudnessCorrection.py based on the estimated uncompressed file size. The variable in installer.py might be used in the future if user is allowed to define the ouput format, so I changed the variable default to ffmpeg_output_format = '' in installer.

LoudnessCorrection Version 172
-------------------------------
- Bugfix: Creation of loudness corrected file failed due to a typo in cases where volume needed to be adjusted up. The bug was introduced in version 170.

LoudnessCorrection Version 171
-------------------------------
- Bugfix: When language was 'Finnish' then strings added to filenames mixed English and Finnish words in some cases.
- Old versions of libebur128 did not support more than 2 channels in a wav-file. Now it seems this restriction is gone and 6 channels wavs are supported, so we don't need to convert multichannel files to flac anymore before processing. This change speeds up processing multichannel wav-files.

LoudnessCorrection Version 170
-------------------------------
- Splitting a big (bigger than 4 GB) multichannel file to separate mono files turned out to be very slow since sox is able to output just one file at a time. Now max 10 sox commands are run in parallel in separate threads. This cuts prosessing time when splitting up a 5.1 file to about a third (speed depends on raw processor power).

HeartBeat_Checker version 019
-------------------------------
- The copyright disclaimer at the beginning of the code was missing some information, added it. No changes to the program code.

LoudnessCorrection Version 169
-------------------------------
- Found a way to skip creating an intermediate file when the output file size is over 4 GB and needs to be split to separate channels. Speeds things up a bit in these cases.
- Cleaned up sox routines by splitting repeating sections to separate subroutines.
- Bugfix: integrated loudness calculation routine mixed english and finnish in error messages.

LoudnessCorrection Version 168
-------------------------------
- Moved a functionality to it's own subroutine: get_audiofile_info_with_sox_and_determine_ouput_format
- If output file size would exeed wav format max size of 4 GB, and the file is split to separate mono files or stored as a flac file then print a warning message about this in the loudness history graphics file.

LoudnessCorrection Version 167
-------------------------------
- Bugfix: Corrected some bugs in 4 GB limit workaround. 

LoudnessCorrection Version 165
-------------------------------
- Workaround for wav 4 GB size limit is ready but untested. If outputfile will be bigger than 4 GB (for example a long 5.1 file), the channels in the file will be split to separate mono files. If individual mono files would still exeed the 4 GB wav limit, then all channels of the file are written to a single flac file.

LoudnessCorrection Version 164
-------------------------------
- Took another approach to the 4 GB wav file size limit problem and undid some work done in version 163.
- Latest version of Sox (14.4.2) seems to have implemented wav size support over 4 GB limit, but it's still buggy. Wav header gets messed up when 4 GB limit is exceeded. I filed a bugreport here: http://sourceforge.net/tracker/?func=detail&aid=3558019&group_id=10706&atid=110706

LoudnessCorrection Version 163
-------------------------------
- Bugfix: By mistake used a wrong Python method to find channel count and other numeric audio information from FFmpeg output. Corrected.
- Started initial work on a problem when processing very large files would cause output file size to exceed wav-format max size of 4 GB.

Documentation
--------------
- Added info about how to download unreleased development versions of the software.

HeartBeat_Checker version 018
-------------------------------
- Bugfix: HeartBeat Checker adds the time when an error happened to the email it sends to admin. The time was not always correct.
- HeartBeat Checker now adds Heartbeat Checker and LoudnessCorrection program version numbers and other additional program info to emails it sends to the admin.

LoudnessCorrection Version 162
-------------------------------
- LoudnessCorrection now adds its version number to the timestamp-file that HeartBeat_Checker monitors.

LoudnessCorrection Version 161
-------------------------------
- All FFmpeg output parsing is now in its own subroutine and easier to change when new needs arise.
- Bugfix: it seems that transport streams can have audio streams with a channel count of 0 which is quite surprising. These dummy streams are now skipped.
- Bugfix: corrected another instance of a bug corrected in 159, when FFmpeg output contained characters that could not be translated to UTF-8 and caused a crash. Now ISO-8859-15 is used in these cases.
- Corrected variable name: 'peak_measuring_method' to 'peak_measurement_method'.
- LoudnessCorrection now writes its version number to the timestamps file that HeartBeat_Checker monitors.

Installer 039
--------------
- Corrected variable name: 'peak_measuring_method' to 'peak_measurement_method'.

LoudnessCorrection Version 160
-------------------------------
- Audio stream information is found out using FFmpeg. FFmpeg output parsing is split into two parts in the program. Started to move all FFmpeg output parsing to its own subroutine: get_audio_stream_information_with_ffmpeg. 

LoudnessCorrection Version 159
-------------------------------
- Added an check for if FFmpeg extracted stream number is valid.
- Bugfix: Fixed a crash that happened when a file was inspected with FFmpeg and it output info (transportstream metadata) that contained characters that could not be translated to UTF-8. In these cases ISO-8859-15 is now used.
- Bugfix: FFmpeg output format changes slightly depending what stream info it finds. Stream map numbers were not always found.

LoudnessCorrection Version 158
-------------------------------
- Bugfix: If a file has many audiostreams then FFmpeg sometimes extracts the streams in random order and stream numbers and channel counts in filenames won't match. The FFmpeg stream number is now extracted from FFmpeg output and mapping is used to extract the streams in the correct order. 

LoudnessCorrection Version 157
-------------------------------
- Corrected some copy / paste errors that was left when doing the modifications in version 155.

LoudnessCorrection Version 155
-------------------------------
- Hunted a hanging bug that sometimes manifests itself when processing lots of very short files (duration 1 second). I changed all instances of subprocess.Popen to use real files as the stdout and stderr buffers for the external commands that are run through subprocess.Popen. Some sources on the net said this is safer in threading than using subprocess.PIPE. In the end I found that the hanging bug is not in LoudnessCorrection.py but in libebur128 program 'loudness'. I have made the developer aware of this problem by filing a bugreport here: https://github.com/jiixyj/libebur128/issues/14

#####################################
# Released FreeLCS 1.02 with:       #
# - LoudnessCorrection version 154  #
# - HeartBeat_Checker version 017   #
# - Installer version 038           #
# - Latest Documentation            #
#####################################

Documentation
--------------
- Corrected some typos and made minor clarifications.
- Corrected an error in the command needed to install required packages. The requirements was missing idle3.
- Added info about how to report bugs and get error messages from the programs.

#####################################
# Released FreeLCS 1.01 with:       #
# - LoudnessCorrection version 154  #
# - HeartBeat_Checker version 017   #
# - Installer version 038           #
# - Latest Documentation            #
#####################################

Documentation
--------------
- Added the new window in the installer that lets user select between sample peak and TruePeak measurement.

LoudnessCorrection Version 154
-------------------------------
- Bugfix: Added printing of peak_measurement method In debug - mode. I forgot to do that in the last version :)

Installer 038
--------------
- Bugfix: LoudnessCorrection.py was not installed to /usr/bin/ if user after installation navigated back through windows.
- Added the possibility to select between sample peak and TruePeak measurement.

Documentation
--------------
- Added some clarifications to the manual about what happens to the files when they are processed.

LoudnessCorrection Version 153
-------------------------------
- Bugfix: If there were several audiostreams in a file, then the channel count string in the extracted files name was incorrect.
- Bugfix: When setting debug = True, the script crashed due to a critical dictionary not being defined.
- Bugfix: Audio duration was not correctly extrated from ffmpeg output in some cases.
- Added the possibility to use libebur128 TruePeak measurement method to find highest peaks. This is 4 times slower than just finding the sample peaks.
- Protective limiter limits peaks to -4 dBFS when using sample peaks and to -2 dBFS when using TruePeak. In both cases resulting peaks will be about 1 dB higher than the limit.

LoudnessCorrection Version 152
-------------------------------
- Bugfix: Introduced a bug a couple of versions ago when increased the maximum number of audiostreams that are extracted from a file from 8 to unlimited. The bug caused the program to crash when it was processing mp3 - files.
- Bugfix: File duration was displayed incorrectly in the loudness history graphics file if duration was exactly 10 seconds.
- Loudness history graphics display is calculated with 0.5 sec resolution if file duration is under 12 seconds (was previously for files less than 10 seconds). Resolution for longer files is 3 seconds.

#####################################
# Released FreeLCS 1.00 with:       #
# - LoudnessCorrection version 151  #
# - HeartBeat_Checker version 017   #
# - Installer version 037           #
# - Latest Documentation            #
#####################################

Documentation
--------------
- Added documentation for FreeLCS 1.0 :)

HeartBeat_Checker version 017
-------------------------------
The first email (HeartBeat_Checker has started) was sent too early, before the timestamps and other info of LoudnessCorrection was read.

Installer 037
--------------
- Bugfix: Some directory permissions were not set correctly if HeartBeat Checker was deselected in installer.

Installer 035
--------------
- Bugfix: Installer let the user go to the next window even though loudnesscorrection_init_script was not installed yet.
- Bigfix: Some directory ownership and permissions were not set correctly if the user selected not to create a ram disk.

#####################################
# First Public Git Commit :)        #
#####################################

HeartBeat_Checker version 015
-------------------------------
- HeartBeat_Checker now reads LoudnessCorrection IP-Addresses from the heartbeat.pickle instead of getting the addresses from the os. If HeartBeat_Checker and LoudnessCorrection are running on separate machines then emailed error messages nwo correctly tell IP-Addresses of the LoudnessCorrection - machine.

LoudnessCorrection Version 151
-------------------------------
- The script now writes the machines IP-Addresses to the pickle HeartBeat_Checker monitors.
- Made some small modifications to error email formatting.

Installer 034
--------------
- Bugfix: Samba mount path was always 'LoudnessCorrection', changed this to follow the selected language. The mount path when finnish is selected is now 'AanekkyysKorjaus'.
